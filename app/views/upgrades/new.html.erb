<div class="container mx-auto px-4 py-12 max-w-4xl">
  <div class="text-center mb-12">
    <h1 class="text-3xl font-bold mb-3">Choose Your Plan</h1>
    <p class="text-muted-foreground">
      Upgrade <%= @trial.business_name %> to start capturing leads automatically
    </p>
  </div>
  
  <div class="grid md:grid-cols-2 gap-6">
    <% @plans.each do |plan| %>
      <%= render Primitives::CardComponent.new(
        class: "p-6 #{plan.plan_name == 'pro' ? 'border-primary border-2' : ''}"
      ) do |card| %>
        <% if plan.plan_name == 'pro' %>
          <div class="text-xs font-bold text-primary mb-2 uppercase">Most Popular</div>
        <% end %>
        
        <h2 class="text-2xl font-bold mb-2 capitalize"><%= plan.plan_name %></h2>
        
        <div class="mb-6">
          <span class="text-4xl font-bold">$<%= plan.base_price_dollars.to_i %></span>
          <span class="text-muted-foreground">/month</span>
        </div>
        
        <ul class="space-y-3 mb-8 text-sm">
          <li class="flex items-start">
            <svg class="w-5 h-5 text-green-600 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <span><strong><%= plan.calls_included %></strong> AI calls/month</span>
          </li>
          <li class="flex items-start">
            <svg class="w-5 h-5 text-green-600 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <span>Dedicated phone number</span>
          </li>
          <li class="flex items-start">
            <svg class="w-5 h-5 text-green-600 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <span>Real-time lead capture</span>
          </li>
          <li class="flex items-start">
            <svg class="w-5 h-5 text-green-600 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <span>Analytics dashboard</span>
          </li>
          <% if plan.plan_name == 'pro' %>
            <li class="flex items-start">
              <svg class="w-5 h-5 text-green-600 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span>Priority support</span>
            </li>
          <% end %>
        </ul>
        
        <%= form_with url: upgrades_path(trial_id: @trial.id), method: :post do |f| %>
          <%= f.hidden_field :plan, value: plan.plan_name %>
          <%= render Primitives::ButtonComponent.new(
            type: "submit",
            size: :lg,
            variant: plan.plan_name == 'pro' ? :default : :outline,
            class: "w-full"
          ) do %>
            Choose <%= plan.plan_name.titleize %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </div>
  
  <div class="text-center mt-8">
    <%= link_to "← Back to Trial", trial_path(@trial), class: "text-sm text-muted-foreground hover:text-foreground" %>
  </div>
</div>
